# 💯 KNU_SW_python_project_team_2
## 💬 주제 : 교통 안전 취약 지역 발굴
### 👤 팀원 : 오승윤, 이상민, 정가온, 허민영
---
### 📙 프로젝트 이름 및 목적
**🌿 이름** : 이든길  
**🎯 목적** : 다양한 교통 및 재난 위험 요소(지반침하, 침수, 도로결빙, 교통사고 등)를 통합적으로 분석하고, 이를 시각화 및 커뮤니티 기반 정보 공유를 통해 시민이 스스로 대응할 수 있도록 돕는 종합 안전 플랫폼입니다.

---

### 🧰 환경 구축 + 기능 구성 총정리

<details>
  <summary>📚 사용된 라이브러리 </summary>

---

### 📦 웹 개발 및 Django 관련

| 라이브러리 | 설명 |
|------------|------|
| Django     | Python 대표 웹 프레임워크. 웹 페이지, API, DB 관리 등 전반적인 백엔드 처리 |
| sqlparse   | Django 내부에서 SQL 구문을 파싱할 때 사용됨 |
| asgiref    | Django의 비동기 처리 지원 라이브러리 |

---

### 🧠 머신러닝 및 모델 관련

| 라이브러리 | 설명 |
|------------|------|
| xgboost         | 고성능 머신러닝 모델(XGBoost 회귀/분류) 라이브러리 |
| scikit-learn    | ML 알고리즘과 전처리, 모델 평가 기능 제공 |
| joblib          | 학습된 모델을 `.pkl`로 저장/불러오기 위해 사용 |
| numpy, scipy    | 수치 연산, 선형대수 계산 필수 기반 라이브러리 |
| threadpoolctl, threading, tenacity | 병렬 계산 및 내구성 보완용 (간접 사용) |

---

### 🗂 데이터 처리 및 분석

| 라이브러리 | 설명 |
|------------|------|
| pandas               | 표 형태의 데이터 처리 (CSV, Excel 등) |
| openpyxl, et_xmlfile | Excel(xlsx) 파일 처리용 백엔드 |
| matplotlib, seaborn  | 데이터 시각화 (차트, 히트맵 등) |
| pyarrow              | 빠른 I/O 및 파일 포맷 처리 (예: Parquet) |

---

### 🧭 지도 및 위치 데이터 분석

| 라이브러리 | 설명 |
|------------|------|
| folium                              | Leaflet.js 기반의 지도 시각화 (HTML 지도 생성) |
| geopandas                           | 지리정보(GIS) 데이터를 Pandas처럼 처리 |
| shapely                             | 공간 연산 (교차, 면적, 경계 등) 수행 |
| pyproj                              | 위경도 좌표계 변환 |
| rasterio, affine, mercantile, contextily, branca, xyzservices | 공간 타일맵, 배경지도, GeoTIFF 렌더링용 도구들 |

---

### 🌐 크롤링 / 웹 자동화

| 라이브러리 | 설명 |
|------------|------|
| beautifulsoup4       | HTML 구조 파싱 및 정보 추출 |
| requests             | 웹사이트에 요청 보내기 (GET, POST 등) |
| lxml                 | 빠른 HTML/XML 파싱을 위한 parser |
| selenium, webdriver-manager | 브라우저 자동화 도구 (동적 페이지 크롤링 시 사용) |

---

### 🧪 개발 보조 / 콘솔 / 노트북 환경

| 라이브러리 | 설명 |
|------------|------|
| ipython, ipykernel, jupyter_* | Jupyter Notebook 실행 환경 |
| tqdm                        | 반복문 진행 상황 시각화 |
| colorama                    | 터미널 컬러 출력 지원 |
| python-dotenv              | `.env` 파일로 환경변수 관리 |
| watchdog                   | 파일 변화 감지 (개발 자동화 도구에 사용됨) |

</details>

<details>
  <summary>📁 프로젝트 폴더 구조 보기</summary>
  
```
data_B_project/  
├── .venv/  
│ └── 💡 가상환경 (패키지 충돌 방지 및 협업 목적)  
│ - 필요한 라이브러리만 설치 가능  
│ - requirements.txt로 공유 및 관리 용이  

├── data/  
│ ├── people/ 📊 서울시 자치구별 인구수  
│ ├── traffic accident/ 🚗 교통사고 연도별 Excel (2019~2023)  
│ ├── Traffic light/ 🚦 신호등 및 횡단보도 위치  
│ └── 기타 참고 데이터 포함  

├── dataAnalysis1.ipynb  
│ └── 📈 초기 데이터 분석용 Jupyter 노트북 (pandas, 시각화, 병합 등 실험)  

├── ngrok/  
│ └── 🌐 ngrok 실행 및 설정  
│ ① make.com 워크플로우용 웹훅 연동  
│ ② 외부 접근 가능한 임시 URL 제공  
│ ③ 로컬 서버 테스트 자동화를 위한 브리지 역할  

├── emergency_contacts_to_sqlite.py  
│ └── 🚑 응급기관 JSON → SQLite 저장 스크립트  
│ - 행정안전부 API 기반 254개 기관 정보 수집  

├── real_python_project/  
│ ├── db.sqlite3 📦 기본 장고 DB  
│ ├── emergency_agencies.db 🏥 응급기관 DB  
│ ├── final_merged_with_coords.csv ✅ 병합 완료된 최종 CSV  
│ 
│ ├── main/ 💻 Django 앱 구성  
│ │ ├── models.py 모델 정의 (Post, DailyUpdate 등)  
│ │ ├── views.py 요청 처리, API 연동  
│ │ ├── forms.py 사용자 입력 폼  
│ │ ├── model_utils.py 자치구 위험도 예측 함수  
│ │ ├── model_trainer.py모델 학습 + joblib 저장  
│ │ ├── templates/main/ 템플릿 HTML  
│ │ │ ├── community.html, dashboard_1~4.html, quiz_start.html, rehome.html 등  
│ │ ├── static/images/ 분석 결과 시각화 이미지  
│ │ └── migrations/ DB 마이그레이션  

│ ├── scraper.py 📰 행정안전부 보도자료 크롤링  
│ ├── model_utils.py 예측 수행 + 설명 반환  
│ ├── model_trainer.py XGBoost 학습 후 저장  
│ ├── xgb_model.pkl 저장된 모델  

├── requirements.txt 📦 필요한 패키지 목록  
└── README.md 📘 프로젝트 설명, 실행 방법, 구성도
```
</details>

<details>
  <summary>🖥️ 실행 화면 </summary>
  
  ### 메인 화면
  
  ![메인화면](ScreenShots/메인화면.png)

  ### 이든길과의 만남

  ![이든길과의 만남](ScreenShots/이든길과의만남.png)

  ### 지반침하

  ![지반침하](ScreenShots/지반침하.png)

  ### 교통사고

  ![교통사고](ScreenShots/교통사고.png)

  ### 교통사고 위험도

  ![위험도](ScreenShots/교통사고위험도.png)

  ### 상습 침수 구역

  ![상습침수](ScreenShots/상습침수.png)

  ### 도로 결빙 구역

  ![도로결빙](ScreenShots/도로결빙.png)

  ### 비상연락기관

  ![비상연락망](ScreenShots/비상연락기관.png)

  ### 안전관리 일일상황

  ![안전관리 일일상황](ScreenShots/안전관리일일상황.png)

  ### 이든길 커뮤니티

  ![커뮤니티](ScreenShots/커뮤니티.png)

  ### 심리테스트

  ![심리테스트](ScreenShots/심리테스트.png)
</details>

---

### 🤝 회의 내용
<details>
<summary> 📌 첫 번째 회의 내용 </summary>

1. 웹 페이지 UI 공유하기
  
2. 서울시 행정구역 데이터 범위 결정하기  
-> 서울시 행정구역 구 기준으로 결정

3. 데이터 수집하기  

 (1) **교통사고** (교통사고 정보를 위해 모아야 할 데이터)  
  - 사고 발생 위치 (GIS 좌표), 시간, 유형 (차대차, 차대사람 등)  
  - 사고 원인, 피해 규모 (사망, 중상, 경상 등)  

 (2) **싱크홀 및 지반 침하 위험 지역 데이터** (싱크홀 정보를 위해 모아야 할 데이터)  
  - 과거 싱크홀 발생 이력 (위치, 규모, 원인)  
  - 지반 조사 자료 (지질도, 지하수위 변동, 지반 특성 등)  
  - 상하수도관 노후도 및 누수 발생 이력  
  - 대규모 지하 개발 공사 현황 (지하철, 터널 등)  

 (3) **기타 위험 요인**  
  - 급경사지  
  - 상습 침수 구역  
  - 낙석 위험 지역  
  - 도로 결빙

우리 지역 -> 안전도 테스트
  
4. 역할 분담 및 만날 날짜
  - **데이터 전처리 및 데이터 분석** : 이상민, 허민영
  - **Django를 활용한 웹페이지 구축** : 정가온
  - **데이터 시각화 자료 및 발표 피피티 제작** : 오승윤
  - **다음 회의 일정** : 5/15 파이썬 수업 후
</details>
<details>
  <summary>📌 두 번째 회의 내용 (5/15) </summary>

  - 데이터 수집 목록 확인
  - 추가 데이터 있는지 살펴보기
      - 추가 데이터 있을 시 조건
      1. 추가 데이터 목록을 모두와 공유하기
      2. 추가 데이터도 동일하게 다같이 모아야함
  - 웹 프로토타입 살펴보기
  - 다음주까지 해와야 할 것들
      - 승윤: 이든길 가이드라인 표 작성하기
      - 민영, 상민: 싱크홀 및 지반침하 데이터 분석 완료 파일 완성해서 오기
      - 가온: 웹 페이지 4개 HTML로 작성하기
</details>
<details>
  <summary>📌 세 번째 회의 내용 (5/18) </summary>
  
  - 데이터 수집 결과 공유
  - 가이드라인 작성한 것 공유
  - 웹 페이지 어디까지 진행했는지 공유
  - 데이터 분석 오늘부터 시작

  - 화요일까지 웹페이지 담당자 : 웹페이지 두개 구축
  - 데이터 분석 담당자 : 다음주 목요일까지 싱크홀 분석
</details>
<details>
  <summary>📌 네 번째 회의 내용 (5/22) </summary>

  - 웹 페이지 구축 2개 확인하기
  - 데이터 분석 파트 나눈 거 이야기하기
  - 데이터 분석 현황

  - 다음주 목요일까지
  - 민영: 싱크홀 .ipynb파일 -> 시각화한테 넘기기
  - 상민: .ipynb파일 -> 시각화한테 넘기기
  - 가온: 파일 4개 구축하기
  - 승윤: 시각화 시작
</details>
<details>
  <summary>📌 다섯 번째 회의 내용 (6/3) </summary>
  
  - 승윤, 상민: 시각화 자료 넘겨받으면 시각화 할 수 있는 데까지 해오기
  - 가온: 장고로 메인 페이지 제작, 4개 페이지 연결, 가능하면 가이드라인 버튼까지.
  - 민영: 싱크홀 최대한 해오기

  - 위 기능 검사하기
</details>
<details>
  <summary>📌 마지막 회의 내용 (6/12) </summary>
  
  - 웹 페이지 전체 확인하기
  - 깃허브 다시 꾸미기
  - 배포 여부
  - 피피티 제작 및 발표 준비하기
</details>

- **페이지 디자인 1 : [figma_1](https://www.figma.com/design/EVlEsAvssMzduNOMQqq03p/Data-##Visualization-Package--Community---Community-?m=auto&t=EaSnN1FVl4JoH4ck-6)**  
- **페이지 디자인 2 : [figma_2](https://www.figma.com/design/R1xDkiDhgZPlxjdtCBAjMT/Best-Websites-of-2023---Webflow-%7C-Figma-Design--Community-?node-id=0-1&t=PXqxduq8GY0n6Wz7-1)**

---
### 🛤️ 이든길 가이드라인
<details>
  <summary>🛡️ 이든길 이용 가이드</summary>

- 대시보드를 통해 재난 데이터를 확인하세요.
- 비상연락망은 클릭 한 번으로 접근할 수 있어요.
- 커뮤니티에 의견을 자유롭게 남기세요!
</details>
<details>
  <summary>💡 ‘이든길’이 알려주는 홍수 안전 예방법</summary>
  
**기상 특보 확인:** 호우 예보 시 TV, 라디오, 스마트폰 앱 등으로 기상 특보를 수시로 확인하세요.  
**비상 물품 준비:** 손전등, 라디오, 비상식량, 구급약품, 휴대폰 충전기 등을 미리 준비해둡니다.  
**가스/전기 차단:** 침수 위험이 있을 경우, 주택 내 가스와 전기를 미리 차단합니다.  
**지하 공간 대피:** 지하 주차장, 반지하 주택 등 지하 공간은 침수 시 매우 위험하므로 즉시 대피합니다.  
**하천변/계곡 접근 금지:** 갑자기 불어난 물에 휩쓸릴 수 있으니 하천변이나 계곡 주변은 절대 가까이 가지 마세요.  
**차량 이동 자제:** 침수된 도로는 진입하지 말고, 불가피할 경우 우회하거나 대중교통을 이용합니다.  
**농경지/시설물 점검:** 비닐하우스, 농경지, 축사 등 시설물을 미리 점검하고 취약 부분은 보강합니다.  
**대피 경로 확인:** 거주 지역의 대피 장소와 경로를 미리 숙지하고, 재난 시에는 관계 당국의 안내에 따릅니다.  
※ 이든길은 여러분의 안전을 최우선으로 생각합니다. 재난 발생 시 안전 수칙을 준수하세요.  
</details>
<details>
  <summary>❓ 대한민국 역사 속 주요 홍수 사건들</summary>

**1925년 을축년 대홍수:** 일제강점기 기록된 가장 큰 홍수 중 하나. 한강 범람으로 서울 도심 대부분이 침수되고 큰 인명 피해가 발생했습니다.  
**1984년 중부지방 집중호우:** 수도권과 강원 지역에 기록적인 폭우가 쏟아져 많은 이재민과 재산 피해가 발생했습니다.  
**1987년 8월 대홍수:** 태풍과 장마가 겹치면서 남부지방을 중심으로 큰 피해가 발생, 섬진강 유역의 피해가 특히 컸습니다.  
**1990년 전국적인 홍수:** 여름 장마와 태풍으로 전국적으로 동시다발적인 홍수 피해가 발생, 농경지 침수와 이재민이 다수 발생했습니다.  
**2002년 태풍 루사:** 강원도를 중심으로 기록적인 폭우를 동반하여 엄청난 인명 및 재산 피해를 남겼습니다. 역대급 재난 중 하나로 기록됩니다.  
**2011년 우면산 산사태:** 서울 우면산 일대에 집중호우가 발생하여 산사태로 인한 인명 피해와 주택 침수가 발생했습니다.  
**2020년 장마철 집중호우:** 중부지방을 중심으로 50일 넘는 긴 장마가 이어지며 누적 강수량이 역대급을 기록, 하천 범람 및 산사태 피해가 컸습니다.  
**2022년 수도권 집중호우:** 서울 강남 등 수도권 도심에 기록적인 시간당 폭우가 쏟아져 지하철역, 도로, 주택 침수 등 큰 혼란이 발생했습니다.  
※ 위 내용은 주요 사건의 예시이며, 실제 역사는 더 많은 홍수 피해를 기록하고 있습니다.  
</details>
<details>
  <summary>❄️ 도로결빙 주의하는 방법 ❄️</summary>
  
**감속 운전:** 빙판길에서는 평소보다 20~50% 이상 감속해야 합니다.  
**안전거리 확보:** 평소보다 2배 이상 충분한 안전거리를 유지하세요.  
**급조작 금지:** 급출발, 급가속, 급제동, 급핸들 조작은 피해야 합니다.  
**미끄럼 방지 장비:** 스노체인, 스노타이어 등 미끄럼 방지 장비를 준비하세요.  
**블랙 아이스 주의:** 육안으로 식별하기 어려운 블랙 아이스를 특히 조심해야 합니다. (교량 위, 터널 출입구, 응달진 곳)  
**대중교통 이용:** 가급적 대중교통을 이용하는 것이 안전합니다.  
</details>

---

### 📑 데이터 분석

---

### 🖼️ 데이터 시각화


